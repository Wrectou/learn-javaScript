 <!DOCTYPE html>
 <html lang="en">
 <head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>闭包</title>
 </head>
 <body>
   <script>
    // 当内部函数被返回到外部并保存时，一定会产生闭包，闭包会产生原来的作用域链不释放，过度闭包会导致内存泄漏，或加载过慢

    // 一个班级，学生名字放在一个数组里面，两个方法写在函数中的一个对象里面，
    // 第一个方法加入班级，第二个方法离开班级，每次加入或离开，都需要打印新的名单

    function student() {
      var sArr = ['小黄', '张三']

      var setStudent = {
        addStud: function(studName) {
          sArr.push(studName)
          console.log(sArr);
        },
        removeStud: function(studName) {
          for (var i = 0; i < sArr.length; i++) {
            if (sArr[i] == studName) {
              sArr.splice(i, 1)
            }
          }
          console.log(sArr);
        }
      }

      // return setStudent
      return [setStudent.addStud, setStudent.removeStud]
    }

    let school = student()
    // school.addStud('王五')
    // school.removeStud('小黄')
    school[0]('王五')
    school[1]('小黄')



    function test() {
      var n = 0
      function add() {
        ++n
        console.log(n)
      }
      return add
    }
    let funcAdd = test()
    funcAdd()
    funcAdd()
    funcAdd()
    funcAdd()
    funcAdd()
    funcAdd()


    // function test1(){
    //   function test2(){
    //     var b = 2
    //     console.log(a);
    //   }
    //   var a = 1
    //   return test2
    // }
    // var c = 3
    // var test3 = test1()
    // test3()
   </script>
 </body>
 </html>